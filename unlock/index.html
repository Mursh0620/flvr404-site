<!-- FLVR404 Terminal v9.5: XP + Rank + Badge + Leaderboard + VIDEO BACKGROUND + Typing Sound Variants -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>FLVR404 Terminal Breach</title>
  <style>
    :root {
      --primary: #00ffcc;
      --danger: #ff0055;
      --warning: #ffaa00;
      --bg: black;
    }
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--primary);
      font-family: monospace;
      height: 100%;
      overflow: hidden;
    }
    #bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -2;
      opacity: 0.2;
      filter: blur(2px) contrast(120%);
    }
    #terminal {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      height: 100vh;
      padding: 1rem;
    }
    .glitch-text.typing {
      font-size: 1rem;
      border-right: 2px solid var(--primary);
      white-space: nowrap;
      overflow: hidden;
      animation: typing 3s steps(40, end), blink 0.75s step-end infinite;
    }
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }
    @keyframes blink {
      from, to { border-color: transparent; }
      50% { border-color: var(--primary); }
    }
    #output {
      background: rgba(0,0,0,0.6);
      border: 2px solid var(--primary);
      padding: 0.75rem;
      margin: 1rem 0;
      width: 100%;
      height: 30vh;
      overflow-y: auto;
      font-size: 0.85rem;
      white-space: pre-line;
    }
    input {
      background: var(--bg);
      border: none;
      border-bottom: 2px solid var(--primary);
      color: var(--primary);
      width: 100%;
      font-size: 1.1rem;
      padding: 0.5rem;
      outline: none;
    }
  </style>
</head>
<body>
  <!-- Background video layer -->
  <video autoplay loop playsinline id="bg-video">
    <source src="assets/video/unlock-bg.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <!-- Background ambient audio -->
  <audio autoplay loop playsinline id="bg-audio" controls style="display:none;">
    <source src="assets/audio/unlock-bg.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <!-- Typing sound variants -->
  <audio id="typing1" src="assets/audio/typing1.mp3" preload="auto"></audio>
  <audio id="typing2" src="assets/audio/typing2.mp3" preload="auto"></audio>
  <audio id="typing3" src="assets/audio/typing3.mp3" preload="auto"></audio>

  <div class="glitch-text typing">FLVR404@system:~$ Type a command</div>
  <div id="output"></div>
  <input type="text" id="cmdInput" placeholder="/" autofocus>

  <script>
    const typingSounds = [
      document.getElementById('typing1'),
      document.getElementById('typing2'),
      document.getElementById('typing3')
    ];

    const inputField = document.getElementById('cmdInput');
    const output = document.getElementById('output');
    let strike = 0;
    let xp = parseInt(localStorage.getItem('flvr404_xp')) || 0;
    let leaderboard = JSON.parse(localStorage.getItem('flvr404_leaderboard')) || [];

    inputField.addEventListener('keydown', () => {
      const sound = typingSounds[Math.floor(Math.random() * typingSounds.length)];
      sound.currentTime = 0;
      sound.play();
    });

    function appendLog(text, color = 'var(--primary)') {
      const p = document.createElement('div');
      p.style.color = color;
      p.innerText = text;
      output.appendChild(p);
      output.scrollTop = output.scrollHeight;
    }

    function gainXP(amount) {
      xp += amount;
      localStorage.setItem('flvr404_xp', xp);
      appendLog(`+${amount} XP  (Total: ${xp})`, '#00ffcc');
      updateLeaderboard();
    }

    function getRank(xp) {
      if (xp >= 5000) return 'üõ°Ô∏è GLITCH MASTER';
      if (xp >= 3000) return 'üíÄ SYSTEM BREACHER';
      if (xp >= 1000) return '‚ö° CORE INTRUDER';
      if (xp >= 500)  return 'üîß PACKET SNIFFER';
      if (xp >= 100)  return 'üì° SIGNAL INTERCEPT';
      return 'üï∂Ô∏è NEW ENTITY';
    }

    function getBadge(xp) {
      return 'üèÖ'.repeat(Math.floor(xp / 1000));
    }

    function updateLeaderboard() {
      let user = localStorage.getItem('flvr404_user') || 'YOU';
      const record = { user, xp };
      const idx = leaderboard.findIndex(r => r.user === user);
      if (idx > -1) leaderboard[idx] = record;
      else leaderboard.push(record);
      leaderboard.sort((a, b) => b.xp - a.xp);
      localStorage.setItem('flvr404_leaderboard', JSON.stringify(leaderboard));
    }

    function showLeaderboard() {
      appendLog('üìä LEADERBOARD:');
      leaderboard.slice(0, 5).forEach((entry, i) => {
        appendLog(`#${i+1} ${entry.user} ‚Äî ${entry.xp} XP`, '#ffaa00');
      });
    }

    inputField.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        const cmd = inputField.value.trim();

        if (cmd === '/unlock') {
          appendLog('‚úî Access Granted. Redirecting to DROP_01‚Ä¶');
          gainXP(50);
          setTimeout(() => window.location.href = 'https://flvr404.my.id/drop01', 2000);
        } else if (cmd === '/clear') {
          output.innerHTML = '';
        } else if (cmd === '/code 1994') {
          appendLog('üîì Code accepted. You have unlocked hidden access.');
          gainXP(30);
        } else if (cmd.startsWith('/ai ')) {
          appendLog(`ü§ñ ${cmd.slice(4)}? Processing...`);
          gainXP(5);
        } else if (cmd.startsWith('/join ')) {
          localStorage.setItem('flvr404_email', cmd.slice(6));
          appendLog('‚úî You‚Äôve been added to the list.');
          gainXP(10);
        } else if (cmd === '/vision') {
          appendLog('üìπ Playing encrypted preview...');
          appendLog('[VIDEO] https://www.youtube.com/embed/dQw4w9WgXcQ');
          gainXP(20);
        } else if (cmd === '/random') {
          const blob = new Blob(["-- CORRUPTED FILE --\nID: DROP-GLITCH\nSTATUS: UNREADABLE"], {type: "text/plain"});
          const url = URL.createObjectURL(blob);
          const link = document.createElement('a');
          link.href = url;
          link.download = 'manifest-corrupt.txt';
          link.click();
          URL.revokeObjectURL(url);
          appendLog('üìÅ File generated.');
          gainXP(15);
        } else if (cmd === '/decrypt') {
          appendLog('üîê Decryption Challenge: What is the code name for DROP_01?');
          appendLog('Hint: It‚Äôs hidden inside @darksidegue posts.');
          gainXP(25);
        } else if (cmd === '/xp') {
          const rank = getRank(xp);
          const badge = getBadge(xp);
          appendLog(`üß¨ Your XP: ${xp}\nüè∑Ô∏è Rank: ${rank}\nüéñÔ∏è Badge: ${badge || 'None'}`);
        } else if (cmd === '/leaderboard') {
          showLeaderboard();
        } else if (cmd === '/help') {
          appendLog('Available commands:\n/unlock\n/clear\n/code 1994\n/ai <ask>\n/join <email>\n/vision\n/random\n/decrypt\n/xp\n/leaderboard');
        } else {
          strike++;
          appendLog('‚ùå Unknown command: ' + cmd, 'var(--danger)');
          if (strike >= 3) {
            appendLog('‚ö† Too many invalid commands. Try again later.', 'var(--warning)');
            inputField.disabled = true;
            setTimeout(() => {
              inputField.disabled = false;
              strike = 0;
              appendLog('üîì Terminal unlocked.');
              inputField.focus();
            }, 5000);
          }
        }

        inputField.value = '';
      }
    });
  </script>
</body>
</html>
